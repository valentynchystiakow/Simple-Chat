{"ast":null,"code":"import _slicedToArray from\"D:/Courses/FullStackLearning/Projects/Simple-chat-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";//import socket\nimport socket from\"../socket\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){var users=_ref.users,messages=_ref.messages,userName=_ref.userName,roomId=_ref.roomId,onAddMessage=_ref.onAddMessage;//useState hook for input\nvar _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),messageValue=_React$useState2[0],setMessageValue=_React$useState2[1];//useRef hook for saving messages block during whole life cycle of component\nvar messagesRef=React.useRef(null);//function that will send message by click\nvar onSendMessage=function onSendMessage(){socket.emit(\"ROOM:NEW_MESSAGE\",{userName:userName,roomId:roomId,text:messageValue});onAddMessage({userName:userName,text:messageValue});setMessageValue(\"\");};//adding scroll to messages block\nReact.useEffect(function(){messagesRef.current.scrollTo(0,99999);},[messages]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"chat-users\",children:[\"Room: \",/*#__PURE__*/_jsx(\"b\",{children:roomId}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"ul\",{children:users.map(function(name,index){return/*#__PURE__*/_jsx(\"li\",{children:name},name+index);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-messages\",children:[/*#__PURE__*/_jsx(\"div\",{ref:messagesRef,className:\"messages\",children:messages.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{className:\"message\",children:[/*#__PURE__*/_jsx(\"p\",{children:message.text}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"span\",{children:message.userName})})]});})}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"textarea\",{value:messageValue,onChange:function onChange(e){return setMessageValue(e.target.value);},className:\"form-control\",rows:\"3\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onSendMessage,type:\"button\",className:\"btn btn-primary\",children:\"Send\"})]})]})]});}export default Chat;","map":{"version":3,"names":["React","socket","jsx","_jsx","jsxs","_jsxs","Chat","_ref","users","messages","userName","roomId","onAddMessage","_React$useState","useState","_React$useState2","_slicedToArray","messageValue","setMessageValue","messagesRef","useRef","onSendMessage","emit","text","useEffect","current","scrollTo","className","children","map","name","index","ref","message","value","onChange","e","target","rows","onClick","type"],"sources":["D:/Courses/FullStackLearning/Projects/Simple-chat-main/src/components/Chat.jsx"],"sourcesContent":["import React from \"react\";\n//import socket\nimport socket from \"../socket\";\n\nfunction Chat({ users, messages, userName, roomId, onAddMessage }) {\n  //useState hook for input\n  const [messageValue, setMessageValue] = React.useState(\"\");\n  //useRef hook for saving messages block during whole life cycle of component\n  const messagesRef = React.useRef(null);\n\n  //function that will send message by click\n  const onSendMessage = () => {\n    socket.emit(\"ROOM:NEW_MESSAGE\", {\n      userName,\n      roomId,\n      text: messageValue,\n    });\n    onAddMessage({ userName, text: messageValue });\n    setMessageValue(\"\");\n  };\n\n  //adding scroll to messages block\n  React.useEffect(() => {\n    messagesRef.current.scrollTo(0, 99999);\n  }, [messages]);\n\n  return (\n    <div className=\"chat\">\n      <div className=\"chat-users\">\n        Room: <b>{roomId}</b>\n        <hr />\n        <ul>\n          {users.map((name, index) => (\n            <li key={name + index}>{name}</li>\n          ))}\n        </ul>\n      </div>\n      <div className=\"chat-messages\">\n        <div ref={messagesRef} className=\"messages\">\n          {messages.map((message) => (\n            <div className=\"message\">\n              <p>{message.text}</p>\n              <div>\n                <span>{message.userName}</span>\n              </div>\n            </div>\n          ))}\n        </div>\n        <form>\n          <textarea\n            value={messageValue}\n            onChange={(e) => setMessageValue(e.target.value)}\n            className=\"form-control\"\n            rows=\"3\"\n          ></textarea>\n          <button\n            onClick={onSendMessage}\n            type=\"button\"\n            className=\"btn btn-primary\"\n          >\n            Send\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}